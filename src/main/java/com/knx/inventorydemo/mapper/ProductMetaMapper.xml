<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.knx.inventorydemo.mapper.ProductMetaMapper">


  <resultMap id="ProductMeta" type="com.knx.inventorydemo.structure.ProductMeta">
    <id property="id" column="id"/>
    <result property="name" column="name"/>
    <result property="defaultUom" column="default_uom"/>
    <result property="activity" column="activity"/>
    <association property="vendor">
      <id column="vendor_name" property="name"/>
    </association>
  </resultMap>
  
  <insert id="addNewProduct" parameterType="com.knx.inventorydemo.structure.ProductMeta"
    keyProperty="id"> insert into product_meta (id, name, vendor_name, default_uom) values (#{id},
    #{name}, #{vendor.name}, #{default_uom}); </insert>

  <select id="getProductById" resultMap="ProductMeta">
    select id, name, vendor_name, default_uom, activity from product_meta where id = #{id}
  </select>

  <select id="getProductByStr" resultMap="ProductMeta">
    select id, name from product_meta where name LIKE #{str}
  </select>

  <delete id="deleteProductMetaById">
    delete
  </delete>

  <select id="getAll" resultType="com.knx.inventorydemo.structure.ProductMeta"> select * from
    product_meta; </select>

  <insert id="initTable"> create table if not exists inventorydemo.product_meta ( id varchar(20) not
    null, name varchar(50) not null, vendor_name varchar(20), default_uom varchar(8) not null
    default 'UNIT', activity boolean default false, primary key (id) ); </insert>
</mapper>